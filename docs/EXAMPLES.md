# SSHChic Usage Examples

This document provides detailed examples and use cases for SSHChic, from basic usage to advanced patterns.

## Table of Contents

- [Basic Examples](#basic-examples)
- [Pattern Matching Strategies](#pattern-matching-strategies)
- [Real-World Use Cases](#real-world-use-cases)
- [Advanced Regex Patterns](#advanced-regex-patterns)
- [Performance Tips](#performance-tips)
- [Integration Examples](#integration-examples)
- [Troubleshooting](#troubleshooting)

## Basic Examples

### 1. Simple Suffix Match

Find a key ending with "SSH":

```bash
sshchic --regex "SSH$"
```

**Output**:
```
Using regex pattern: SSH$
Press Ctrl+C to stop
Keys processed: 12.3K | Rate: 45.2 kKeys/s

Match found!
Total keys processed: 12342

Private key:
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
...
-----END OPENSSH PRIVATE KEY-----

Public key:
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHxK8mN... Generated by SSHChic

Fingerprint: SHA256:abc123def456...SSH
```

**Files Created**:
- `id_ed25519` - Private key
- `id_ed25519.pub` - Public key

### 2. Prefix Match

Find a key starting with "AAAA":

```bash
sshchic --regex "^AAAA"
```

**Why This Is Fast**: The beginning of all ED25519 keys is fixed (`ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA...`), so this will match almost immediately.

### 3. Case-Insensitive Match

Find a key containing "github" (any case):

```bash
sshchic --regex "github" --insensitive
```

**Matches**: GITHUB, GitHub, github, GiThUb, etc.

### 4. Fingerprint Matching

Search in the fingerprint instead of the public key:

```bash
sshchic --regex "deadbeef" --fingerprint
```

**When to Use**:
- Fingerprints contain only base64 characters ([A-Za-z0-9+/=])
- Slightly faster than public key matching
- Useful for creating memorable fingerprints

## Pattern Matching Strategies

### Understanding SSH Key Format

**Public Key Structure**:
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA[32-byte key in base64] [comment]
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Fixed prefix        Variable (key data)
```

**Fixed parts** (same for all ED25519 keys):
- Algorithm: `ssh-ed25519`
- Prefix: `AAAAC3NzaC1lZDI1NTE5AAAA`

**Variable part**:
- 43 characters of base64 (32 bytes of key data)
- Character set: `A-Z`, `a-z`, `0-9`, `+`, `/`
- Always ends with `=` (padding)

### Feasibility of Patterns

**Very Fast** (milliseconds to seconds):
```bash
# Matches fixed prefix
sshchic --regex "^ssh-ed25519"

# First few characters after prefix
sshchic --regex "AAAAC3NzaC1lZDI1NTE5AAAA[A-D]"
```

**Fast** (seconds to minutes):
```bash
# 1-2 character patterns anywhere
sshchic --regex "XX"

# Simple suffixes
sshchic --regex "end$"
```

**Moderate** (minutes to hours):
```bash
# 3-4 character patterns
sshchic --regex "test"

# Multiple short patterns
sshchic --regex "(cat|dog|fox)"
```

**Slow** (hours to days):
```bash
# 5+ character patterns
sshchic --regex "hello"

# Long suffixes
sshchic --regex "world$"
```

**Infeasible** (weeks to never):
```bash
# 8+ character patterns
sshchic --regex "verylongpattern"

# Multiple long constraints
sshchic --regex "start.*middle.*end"
```

### Probability Calculations

For random base64 strings:
- **1 character**: 1/64 = ~1.5% chance
- **2 characters**: 1/4,096 = ~0.024% chance
- **3 characters**: 1/262,144 = ~0.00038% chance
- **4 characters**: 1/16,777,216 = ~0.0000059% chance

**Expected keys to test** = 1 / probability

Example: To find "cat" (3 chars):
- Probability: 1/262,144
- Expected tries: ~262,000 keys
- At 50k keys/sec: ~5 seconds

## Real-World Use Cases

### Use Case 1: Personal Branding

**Goal**: SSH key for GitHub profile with your name

```bash
# For user "alex"
sshchic --regex "alex" --insensitive
```

**Result**: Key fingerprint like `SHA256:...alex...`

**Use**: Add to GitHub, GitLab for easily identifiable keys

### Use Case 2: Server Identification

**Goal**: Create unique keys for different servers

```bash
# For production server
sshchic --regex "prod" --fingerprint

# For staging server
sshchic --regex "stag" --fingerprint

# For development server
sshchic --regex "dev" --fingerprint
```

**Benefit**: Instantly recognize which key is which when connecting

### Use Case 3: Team Keys

**Goal**: Generate keys with team identifier

```bash
# DevOps team
sshchic --regex "devo" --insensitive

# Backend team
sshchic --regex "back" --insensitive
```

### Use Case 4: Aesthetic Keys

**Goal**: Create visually appealing or memorable keys

```bash
# All the same character
sshchic --regex "AAA"

# Repeating pattern
sshchic --regex "123123"

# Palindrome
sshchic --regex "(.)(.)\2\1"
```

### Use Case 5: Lucky Numbers

**Goal**: Key with specific numbers (birthday, lucky number, etc.)

```bash
# Birth year 1990
sshchic --regex "1990"

# Lucky number 777
sshchic --regex "777"
```

### Use Case 6: Collecting Multiple Keys

**Goal**: Generate several matching keys to choose from

```bash
# Streaming mode - find multiple matches
sshchic --regex "test" --streaming

# Press Ctrl+C after collecting enough keys
```

**Note**: In streaming mode, keys are displayed but NOT saved to files.

## Advanced Regex Patterns

### Character Classes

```bash
# Only uppercase letters
sshchic --regex "[A-Z]{3}"

# Only lowercase
sshchic --regex "[a-z]{3}"

# Only digits
sshchic --regex "[0-9]{4}"

# Hexadecimal
sshchic --regex "[0-9A-Fa-f]{4}"

# No digits
sshchic --regex "[A-Za-z]{4}"
```

### Anchors

```bash
# Start of string
sshchic --regex "^ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAXXX"

# End of string (after base64 data)
sshchic --regex "test$"

# Word boundary
sshchic --regex "\btest\b"
```

### Quantifiers

```bash
# Exactly 3 'A's
sshchic --regex "A{3}"

# 2 to 4 'A's
sshchic --regex "A{2,4}"

# At least 3 'A's
sshchic --regex "A{3,}"

# Any number of digits
sshchic --regex "[0-9]+"
```

### Alternation

```bash
# Match any of several words
sshchic --regex "(red|blue|green)"

# Multiple patterns
sshchic --regex "(cat|dog|bird)"

# Variations
sshchic --regex "(test|tset|sett)"
```

### Groups and Backreferences

```bash
# Repeated character (e.g., "AA", "BB", "CC")
sshchic --regex "(.)\1"

# Palindrome (e.g., "ABBA")
sshchic --regex "(.)(.)\2\1"

# Mirrored triple (e.g., "ABCCBA")
sshchic --regex "(.)(.)(.)\3\2\1"
```

### Lookaheads (Use Carefully!)

```bash
# Contains both 'X' and 'Y' (anywhere)
sshchic --regex "(?=.*X)(?=.*Y)"

# Starts with digit, contains letter
sshchic --regex "^[0-9].*[A-Za-z]"
```

**Warning**: Complex lookaheads can cause catastrophic backtracking!

### Practical Patterns

```bash
# Hex color code
sshchic --regex "[0-9A-Fa-f]{6}"

# Date-like pattern (MMDD)
sshchic --regex "(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])"

# Time-like pattern (HHMM)
sshchic --regex "([01][0-9]|2[0-3])[0-5][0-9]"

# IPv4-like (simplified)
sshchic --regex "[0-9]{1,3}\.[0-9]{1,3}"

# Emoji-like (using unicode escapes)
sshchic --regex ":\)|;\)|<3"
```

## Performance Tips

### 1. Optimize Your Pattern

**Slow**:
```bash
# Backtracking-heavy pattern
sshchic --regex ".*test.*"
```

**Fast**:
```bash
# Simpler equivalent
sshchic --regex "test"
```

### 2. Use Fingerprint Mode for Non-SSH Characters

**Slow** (SSH keys only have base64 chars):
```bash
sshchic --regex "@#$"  # Will never match
```

**Better**:
```bash
# Fingerprint has more character variety
sshchic --regex "special" --fingerprint
```

### 3. Know What's Feasible

**Don't attempt**:
```bash
# This would take millions of years
sshchic --regex "the quick brown fox jumps"
```

**Do attempt**:
```bash
# Reasonable in minutes
sshchic --regex "fox"
```

### 4. Test Patterns First

Use online regex testers with sample SSH keys:
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHxK8mNvX... example
```

### 5. Use Streaming for Rare Patterns

```bash
# Let it run overnight, collect multiple matches
sshchic --regex "rare" --streaming > found_keys.txt
```

## Integration Examples

### 1. Automated Key Deployment

```bash
#!/bin/bash
# generate_and_deploy.sh

# Generate key with team identifier
sshchic --regex "devops"

# Set proper permissions
chmod 600 id_ed25519
chmod 644 id_ed25519.pub

# Add to SSH agent
eval "$(ssh-agent -s)"
ssh-add id_ed25519

# Copy to servers
ssh-copy-id -i id_ed25519.pub user@server1
ssh-copy-id -i id_ed25519.pub user@server2

echo "Key deployed successfully!"
```

### 2. Batch Key Generation

```bash
#!/bin/bash
# generate_multiple_keys.sh

# Generate keys for different environments
for env in dev staging prod; do
  echo "Generating key for $env..."
  sshchic --regex "$env" --fingerprint

  # Rename to avoid overwriting
  mv id_ed25519 "id_ed25519_$env"
  mv id_ed25519.pub "id_ed25519_$env.pub"

  echo "Created: id_ed25519_$env"
done
```

### 3. CI/CD Integration

```yaml
# .github/workflows/generate-keys.yml
name: Generate SSH Keys

on:
  workflow_dispatch:
    inputs:
      pattern:
        description: 'Regex pattern to search for'
        required: true
        default: 'ci'

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Install SSHChic
        run: |
          wget https://github.com/painteau/SSHChic/releases/latest/download/sshchic-linux-x86_64
          chmod +x sshchic-linux-x86_64

      - name: Generate Key
        run: |
          ./sshchic-linux-x86_64 --regex "${{ github.event.inputs.pattern }}"

      - name: Upload Keys
        uses: actions/upload-artifact@v3
        with:
          name: ssh-keys
          path: |
            id_ed25519
            id_ed25519.pub
```

### 4. Docker Usage

```dockerfile
# Dockerfile
FROM rust:1.75 as builder

WORKDIR /app
COPY . .
RUN cargo build --release

FROM debian:bookworm-slim
COPY --from=builder /app/target/release/sshchic /usr/local/bin/

ENTRYPOINT ["sshchic"]
```

```bash
# Build and run
docker build -t sshchic .
docker run sshchic --regex "docker"
```

### 5. Progress Monitoring Script

```bash
#!/bin/bash
# monitor.sh - Monitor long-running SSHChic process

pattern="$1"
timeout_minutes="${2:-60}"

echo "Searching for pattern: $pattern"
echo "Timeout: $timeout_minutes minutes"

timeout "${timeout_minutes}m" sshchic --regex "$pattern" &
pid=$!

while kill -0 $pid 2>/dev/null; do
  sleep 5
  # Could send notifications, update dashboard, etc.
done

if [ -f id_ed25519 ]; then
  echo "SUCCESS! Key found."
  cat id_ed25519.pub
else
  echo "Timeout reached. No match found."
  exit 1
fi
```

## Troubleshooting

### Problem: "Invalid regex pattern" Error

**Cause**: Regex syntax error

**Solution**:
```bash
# Escape special characters
sshchic --regex "test\."   # Literal dot
sshchic --regex "end\$"    # Literal dollar sign

# Use raw strings in scripts
pattern='test$'
sshchic --regex "$pattern"
```

### Problem: Process Never Finds a Match

**Cause**: Pattern is too specific or impossible

**Diagnosis**:
```bash
# Check if pattern is realistic
# For "abc" (~262k tries expected at 50k keys/s = 5 sec)
# For "abcdef" (~68 billion tries = never)
```

**Solution**:
- Simplify pattern
- Use streaming mode and wait longer
- Consider if pattern is feasible

### Problem: Keys Generated but Not Saved

**Cause**: Running in streaming mode

**Solution**:
```bash
# Remove --streaming flag
sshchic --regex "test"  # Will save to files
```

### Problem: Poor Performance

**Cause**: Complex regex with backtracking

**Solution**:
```bash
# Bad (backtracking)
sshchic --regex "(.*)test(.*)"

# Good (simple)
sshchic --regex "test"
```

### Problem: File Permission Denied

**Cause**: `id_ed25519` already exists and is read-only

**Solution**:
```bash
# Remove or backup existing keys
rm id_ed25519 id_ed25519.pub

# Or make writable
chmod 644 id_ed25519*
```

### Problem: "Too many open files" Error

**Cause**: System file descriptor limit (rare)

**Solution**:
```bash
# Increase limit
ulimit -n 4096

# Then run SSHChic
sshchic --regex "pattern"
```

## Tips and Best Practices

### 1. Start Simple

Begin with simple patterns and work your way up:
```bash
# Start here
sshchic --regex "a"

# Then try
sshchic --regex "ab"

# Then
sshchic --regex "abc"
```

### 2. Use Fingerprint Mode for Speed

Fingerprints are shorter and match faster:
```bash
sshchic --regex "test" --fingerprint
```

### 3. Backup Existing Keys

```bash
# Before running SSHChic
cp id_ed25519 id_ed25519.backup
cp id_ed25519.pub id_ed25519.pub.backup
```

### 4. Test Regex First

Use online tools or:
```bash
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIABCDtest123" | grep -E "your_pattern"
```

### 5. Be Patient

Some patterns take time. Use `Ctrl+C` to stop if needed.

### 6. Streaming for Collection

If you want options:
```bash
sshchic --regex "cool" --streaming > keys.txt
# Let run for a while, Ctrl+C when satisfied
# Review keys.txt and pick your favorite
```

## Estimated Search Times

Based on 8-core CPU @ 50,000 keys/second:

| Pattern | Probability | Expected Keys | Estimated Time |
|---------|-------------|---------------|----------------|
| 1 char | 1/64 | 64 | < 1 second |
| 2 chars | 1/4K | 4,096 | < 1 second |
| 3 chars | 1/262K | 262,144 | ~5 seconds |
| 4 chars | 1/16M | 16,777,216 | ~5.5 minutes |
| 5 chars | 1/1B | 1,073,741,824 | ~6 hours |
| 6 chars | 1/68B | 68,719,476,736 | ~16 days |
| 7+ chars | 1/4T+ | 4,398,046,511,104+ | months to years |

**Note**: Actual times vary based on CPU, pattern complexity, and luck!

---

## Quick Reference

```bash
# Basic search
sshchic --regex "PATTERN"

# Case-insensitive
sshchic -i -r "pattern"

# Fingerprint mode
sshchic -f -r "pattern"

# Streaming mode
sshchic -s -r "pattern"

# Combine flags
sshchic -i -f -r "pattern"

# Help
sshchic --help

# Version
sshchic --version
```

---

For more information, see:
- [README.md](../README.md) - General usage
- [ARCHITECTURE.md](ARCHITECTURE.md) - Technical details
- [CONTRIBUTING.md](../CONTRIBUTING.md) - Contributing guidelines

*Happy key hunting!* ðŸ”‘
